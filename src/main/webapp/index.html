<!DOCTYPE html>

<html ng-app="app">

<head>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

    <script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="//netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.4/angular.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.0-beta.4/angular-route.min.js"></script>
    <script src="js/app.js"></script>
    <script src="js/displayResultsCtrl.js"></script>
    <script src="js/resultsService.js"></script>
    <script src="js/secondsFilter.js"></script>

    <style>
        .penalty {
        background-color:orange;
        }

        .penaltyCount {
        position: absolute;
        z-index: 2;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        text-align: left;
        }

        .wrong-test {
        background-color:red;
        }

        th {
        border-collapse: collapse;
        text-align:center;
        border:solid;
        background-color:lightgrey;
        }

        td {
        width:55px;
        border:solid;
        border-width:1px;
        border-color:black;
        text-align:right;
        position: relative; z-index: 1;
        }

        .strike {
        text-decoration: line-through;
        }
    </style>
</head>

<body>

<nav class="navbar navbar-default" role="navigation">
    <div class="container-fluid">
        <div class="navbar-header">
            <a class="navbar-brand" href="#/index">Time Card</a>
        </div>
    </div>
</nav>

<div ng-controller="displayResultsCtrl as displayResults" style="margin:15px">

    <table style="width:100%">

        <tr>
            <th rowspan="2">Event Type</th>
            <th rowspan="2">Class</th>
            <th rowspan="2">Car Number</th>
            <th rowspan="2">Driver</th>
            <th rowspan="2">Car</th>
            <th rowspan="2">Capacity</th>
            <th colspan="{{layout.noOfRuns}}" ng-repeat="layout in displayResults.resultSummaryResponse.layouts">
                Test
            </th>
            <th rowspan="2">Total Run Times</th>
        </tr>
        <tr>
            <th colspan="{{layout.noOfRuns}}" ng-repeat="layout in displayResults.resultSummaryResponse.layouts">
                {{layout.name}}
            </th>
        </tr>

        <tr ng-repeat="resultSummary in displayResults.resultSummaryResponse.results">
            <td>{{resultSummary.driver.eventType}}</td>
            <td>{{resultSummary.driver.className}}</td>
            <td>{{resultSummary.carNumber}}</td>
            <td>{{resultSummary.driver.name}}</td>
            <td>{{resultSummary.driver.carDescription}}</td>
            <td>{{resultSummary.driver.carCapacity}}</td>
            <td ng-repeat="time in resultSummary.times" ng-class="{'penalty': time.penalties!=0, 'wrong-test': time.wrongTest, 'strike': time.dropped}">
                <div ng-if="time.penalties!=0" class="penaltyCount">
                    {{time.penalties}}
                </div>
                {{time.elapsedTimeWithPenalties|seconds}}
            </td>
            <td style="text-align: right">{{resultSummary.totalTime|seconds}}</td>
        </tr>
    </table>

</div>

<footer class="text-center">
    created by : <img src="img/AutoTimerpng.png" alt="Mountain View" style="width:100px;height:50px;">
</footer>

</body>

</html>
